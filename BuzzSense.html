<!DOCTYPE html>
<html lang="en">
    <head>
 
        <meta charset="UTF-8">
        <title>BuzzSense</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" 
        rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
        <script>
            var whichBuilding;
            var occupancy = "";
            var crosslandImages = [ "./Crossland/crossland0.png","./Crossland/crossland1.png","./Crossland/crossland2.png","./Crossland/crossland3.png",
                                    "./Crossland/crossland4.png","./Crossland/crossland5.png","./Crossland/crossland6.png","./Crossland/crossland7.png"];
            var priceImages = ["./Price/price0.png","./Price/price12.png", "./Price/price34.png"];                        
            var culcImages = ["./Culc/culc1.png", "./Culc/culc2.png", "./Culc/culc3.png", "./Culc/culc4.png", "./Culc/culc5.png"];
            function populateOccupancy(bld,flr)
            {
                var url = 'http://128.61.26.2:3000/mostrecentdata?building='+bld+'&floor='+flr;
                console.log(url);
                fetch(url).then(response => response.json()).then(rj => occupancy = rj);
                console.log(occupancy);
                if (occupancy == "high" || occupancy == "medium" || occupancy == "low"){
                    var occupancyText = document.getElementById("occupancyResults");
                    var standard = document.createTextNode("The occupancy on this floor is " + occupancy.toUpperCase() + " !");
                    occupancyText.appendChild(standard);


                }
            }

            function defaultPage(){
                whichBuilding = "";
                occupancy = "";

                document.getElementById("buildingImage").src = "";
                document.getElementById("ground").classList.add("hidden");
                document.getElementById("first").classList.add("hidden");
                document.getElementById("second").classList.add("hidden");
                document.getElementById("third").classList.add("hidden");
                document.getElementById("fourth").classList.add("hidden");
                document.getElementById("fifth").classList.add("hidden");
                document.getElementById("sixth").classList.add("hidden");
                document.getElementById("seventh").classList.add("hidden");
            }
                    
            function showCulc(){
                whichBuilding = "culc";

                document.getElementById("buildingImage").src = "./Culc/culc.png";


                document.getElementById("ground").classList.add("hidden");

                document.getElementById("first").classList.remove("hidden");
                document.getElementById("second").classList.remove("hidden");
                document.getElementById("third").classList.remove("hidden");
                document.getElementById("fourth").classList.remove("hidden");
                document.getElementById("fifth").classList.remove("hidden");

                document.getElementById("sixth").classList.add("hidden");
                document.getElementById("seventh").classList.add("hidden");



            }
            function showPrice(){
                whichBuilding = "price";
                document.getElementById("buildingImage").src = "./Price/price.png";

                document.getElementById("ground").classList.remove("hidden");
                document.getElementById("first").classList.remove("hidden");
                document.getElementById("second").classList.remove("hidden");
                document.getElementById("third").classList.remove("hidden");
                document.getElementById("fourth").classList.remove("hidden");

                document.getElementById("fifth").classList.add("hidden");
                document.getElementById("sixth").classList.add("hidden");
                document.getElementById("seventh").classList.add("hidden");

            }
            function showCrossland(){
                whichBuilding = "crossland";
                document.getElementById("buildingImage").src = "./Crossland/crossland.png";

                document.getElementById("ground").classList.remove("hidden");
                document.getElementById("first").classList.remove("hidden");
                document.getElementById("second").classList.remove("hidden");
                document.getElementById("third").classList.remove("hidden");
                document.getElementById("fourth").classList.remove("hidden");
                document.getElementById("fifth").classList.remove("hidden");
                document.getElementById("sixth").classList.remove("hidden");
                document.getElementById("seventh").classList.remove("hidden");

            }

            function handleGround(){
                if (whichBuilding=="crossland"){
                    populateOccupancy("chi","room");
                    document.getElementById("buildingImage").src = crosslandImages[0];

                }
                else if (whichBuilding == "price"){
                    populateOccupancy("price",0);

                    document.getElementById("buildingImage").src = priceImages[0];

                }
             
            }

            function handleFirst(){
                if (whichBuilding=="crossland"){
                    populateOccupancy("crossland",1);

                    document.getElementById("buildingImage").src = crosslandImages[1];

                }
                else if (whichBuilding == "price"){
                    populateOccupancy("price",1);
                    document.getElementById("buildingImage").src = priceImages[1];

                }
                else if (whichBuilding == "culc"){
                    populateOccupancy("culc",0);
                    document.getElementById("buildingImage").src = culcImages[0];

                }
             
            }

            function handleSecond(){
                if (whichBuilding=="crossland"){
                    populateOccupancy("crossland",2);
                    document.getElementById("buildingImage").src = crosslandImages[2];

                }
                else if (whichBuilding == "price"){
                    populateOccupancy("price",1);
                    document.getElementById("buildingImage").src = priceImages[1];

                }
                else if (whichBuilding == "culc"){
                    populateOccupancy("culc",1);
                    document.getElementById("buildingImage").src = culcImages[1];

                }
             
            }
            function handleThird(){
                if (whichBuilding=="crossland"){
                    populateOccupancy("crossland",3);
                    document.getElementById("buildingImage").src = crosslandImages[3];

                }
                else if (whichBuilding == "price"){
                    populateOccupancy("price",2);
                    document.getElementById("buildingImage").src = priceImages[2];

                }
                else if (whichBuilding == "culc"){
                    populateOccupancy("culc",2);
                    document.getElementById("buildingImage").src = culcImages[2];

                }
             
            }
            function handleFourth(){
                if (whichBuilding=="crossland"){
                    populateOccupancy("crossland",4);
                    document.getElementById("buildingImage").src = crosslandImages[4];

                }
                else if (whichBuilding == "price"){
                    populateOccupancy("price",2);
                    document.getElementById("buildingImage").src = priceImages[2];

                }
                else if (whichBuilding == "culc"){
                    populateOccupancy("culc",3);
                    document.getElementById("buildingImage").src = culcImages[3];

                }
             
            }
            function handleFifth(){
                if (whichBuilding=="crossland"){
                    populateOccupancy("crossland",5);
                    document.getElementById("buildingImage").src = crosslandImages[5];

                }
                else if (whichBuilding == "culc"){
                    populateOccupancy("culc",4);
                    document.getElementById("buildingImage").src = culcImages[4];

                }

             
            }
            function handleSixth(){
                if (whichBuilding=="crossland"){
                    populateOccupancy("crossland",6);
                    document.getElementById("buildingImage").src = crosslandImages[6];

                }

             
            }
            function handleSeventh(){
                if (whichBuilding=="crossland"){
                    populateOccupancy("crossland",7);
                    document.getElementById("buildingImage").src = crosslandImages[7];

                }

             
            }






        </script> 
    </head>
    <body class="body" id="body" onload=defaultPage()>
 
         <style>
             .hidden{
                 position:absolute;
                 visibility: hidden;
             }
             .body{
                background-color: white;
                font-family: Georgia;
            }
            .row{
                column-gap: 50px;
            }
            .BuzzSenseContainer{
                height: 14%;
                background-color: #B3A369;
                margin-bottom: 30px;
                padding-top: 15px;
            }
            .BuzzSense{ 
                width: 30%;
                height: 6%;
                padding-bottom: 10px;
            }
            .outerbox{
                background-color: #B3A369;
                height: 400px;
                border-radius: 30px;
                margin-bottom: 50px;
                margin-left: 10px;
                margin-right: 10px;
            }
            .selectors{
                text-align: center;
                padding-top: 10px;
            } 
            .imagebox{
               background-color: white;
               margin-left: 20px;
               border-radius: 30px;
               margin-right: 10px;
            }
            .occupancyResults{
                text-align: center;
            }
            .button{
                margin-top: 10px;
                margin-right: 5px;
                margin-left: 5px;
            }
            #culc, #price, #crossland{
                position: absolute;
            }
            .padding-0{
            padding-right:0;
            padding-left:0;
             }
            .headButt{ 
            border: 2px solid black;
            background-color: white;
            color: black;
            padding: 10x 5px;
            font-size: 16px;
            cursor: pointer;
            width:20%;
            height:100%;
            display:block; 
            float:left;
            border-left: 0px;
            border-bottom: 0px;
            }
        </style> 
            <div class="BuzzSenseContainer row justify-content-center">
                    <img  class = "BuzzSense"alt ="BuzzSense Occupancy System" src="buzzsenseblue.png" >
                    <div class="selectors building row padding-0 no-gutters">
                    <div>
                       <button class="headButt" type="button" onclick=showCulc()>CULC</button><!---->
                       <button class="headButt" type="button" onclick=showPrice()>Price Gilbert</button><!---->
                       <button class="headButt" type="button" onclick=showCrossland()>Crossland Tower</button>
                    </div>
                </div>                      
            </div>
            <div class="container ">
                <div class="row justify-content-center">
                    <div class="imagebox col-sm-11 col-md-5 ">
                        <img  id = "buildingImage" src="" width="300" length="700">
                    </div><!---->
                <div class="outerbox col-sm-11 col-md-5 justify-content-center border">
                    <div class="selectors floor">
                        <div class="button row">
                            <button id="seventh"type="button" onclick=handleSeventh()>Floor 7</button>

                        </div>
                        <div class="button row">
                            <button id="sixth" type="button" onclick=handleSixth()>Floor 6</button>

                        </div> 
                        <div class="button row">
                            <button id="fifth"type="button" onclick=handleFifth()>Floor 5</button>

                        </div>
                        <div class="button row">
                            <button id="fourth"type="button" onclick=handleFourth()>Floor 4</button>

                        </div>
                        <div class="button row">
                            <button id="third"type="button" onclick=handleThird()>Floor 3</button>

                        </div>
                        <div class="button row">
                            <button id="second"type="button" onclick=handleSecond()>Floor 2</button>

                        </div>
                        <div class="button row">
                            <button id="first"type="button" onclick=handleFirst()>Floor 1</button>

                        </div>
                        <div class="button row">
                                <button id="ground" type="button" onclick=handleGround()>Ground Floor</button>
    
                            </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col justify-content-center">
                    <div class="occupancyResults justify-content-center" id = "occupancyResults">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>