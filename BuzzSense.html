<!DOCTYPE html>
<html lang="en">
    <head>
 
        <meta charset="UTF-8">
        <title>BuzzSense</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" 
        rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
        <script>
            var whichBuilding;
            var crosslandImages = [ "./Crossland/crossland0.png","./Crossland/crossland1.png","./Crossland/crossland2.png","./Crossland/crossland3.png",
                                    "./Crossland/crossland4.png","./Crossland/crossland5.png","./Crossland/crossland6.png","./Crossland/crossland7.png"];
            var priceImages = ["./Price/price0.png","./Price/price12.png", "./Price/price34.png"];                        
            var culcImages = ["./Culc/culc1.png", "./Culc/culc2.png", "./Culc/culc3.png", "./Culc/culc4.png", "./Culc/culc5.png"];
            function populateOccupancy(bld,flr)
            {
                document.getElementById("occupancyResults").innerHTML = "";
                var occupancy;
                var url = 'http://128.61.26.2:3000/mostrecentdata?building='+bld+'&floor='+flr;
                fetch(url).then(response => response.json()).then(rj => {
                    occupancy = JSON.parse(JSON.stringify(rj))['occupancy'];
                    console.log(occupancy);
                    if (occupancy == "high" || occupancy == "medium" || occupancy == "low"){
                        var occupancyText = document.getElementById("occupancyResults");
                        var standard = document.createTextNode("The occupancy on this floor is " + occupancy.toUpperCase() + "!");
                        occupancyText.appendChild(standard);
                    }
                    else if (occupancy == "no data"){
                        var occupancyText = document.getElementById("occupancyResults");
                        var standard = document.createTextNode("The occupancy of the floor is unknown.");
                        occupancyText.appendChild(standard);
                    }
                });

            }

            function defaultPage(){
                whichBuilding = "";

                document.getElementById("buildingImage").src = "";
                document.getElementById("ground").classList.add("hidden");
                document.getElementById("first").classList.add("hidden");
                document.getElementById("second").classList.add("hidden");
                document.getElementById("third").classList.add("hidden");
                document.getElementById("fourth").classList.add("hidden");
                document.getElementById("fifth").classList.add("hidden");
                document.getElementById("sixth").classList.add("hidden");
                document.getElementById("seventh").classList.add("hidden");
            }
                    
            function showCulc(){
                whichBuilding = "culc";

                document.getElementById("buildingImage").src = "./Culc/culc.png";


                document.getElementById("ground").classList.add("hidden");

                document.getElementById("first").classList.remove("hidden");
                document.getElementById("second").classList.remove("hidden");
                document.getElementById("third").classList.remove("hidden");
                document.getElementById("fourth").classList.remove("hidden");
                document.getElementById("fifth").classList.remove("hidden");

                document.getElementById("sixth").classList.add("hidden");
                document.getElementById("seventh").classList.add("hidden");



            }
            function showPrice(){
                whichBuilding = "price";
                document.getElementById("buildingImage").src = "./Price/price.png";

                document.getElementById("ground").classList.remove("hidden");
                document.getElementById("first").classList.remove("hidden");
                document.getElementById("second").classList.remove("hidden");
                document.getElementById("third").classList.remove("hidden");
                document.getElementById("fourth").classList.remove("hidden");

                document.getElementById("fifth").classList.add("hidden");
                document.getElementById("sixth").classList.add("hidden");
                document.getElementById("seventh").classList.add("hidden");

            }
            function showCrossland(){
                whichBuilding = "crossland";
                document.getElementById("buildingImage").src = "./Crossland/crossland.png";

                document.getElementById("ground").classList.remove("hidden");
                document.getElementById("first").classList.remove("hidden");
                document.getElementById("second").classList.remove("hidden");
                document.getElementById("third").classList.remove("hidden");
                document.getElementById("fourth").classList.remove("hidden");
                document.getElementById("fifth").classList.remove("hidden");
                document.getElementById("sixth").classList.remove("hidden");
                document.getElementById("seventh").classList.remove("hidden");

            }

            function handleGround(){
                if (whichBuilding=="crossland"){
                    populateOccupancy("chi","room");
                    document.getElementById("buildingImage").src = crosslandImages[0];

                }
                else if (whichBuilding == "price"){
                    populateOccupancy("price",0);

                    document.getElementById("buildingImage").src = priceImages[0];

                }
             
            }

            function handleFirst(){
                if (whichBuilding=="crossland"){
                    populateOccupancy("crossland",1);

                    document.getElementById("buildingImage").src = crosslandImages[1];

                }
                else if (whichBuilding == "price"){
                    populateOccupancy("price",1);
                    document.getElementById("buildingImage").src = priceImages[1];

                }
                else if (whichBuilding == "culc"){
                    populateOccupancy("culc",0);
                    document.getElementById("buildingImage").src = culcImages[0];

                }
             
            }

            function handleSecond(){
                if (whichBuilding=="crossland"){
                    populateOccupancy("crossland",2);
                    document.getElementById("buildingImage").src = crosslandImages[2];

                }
                else if (whichBuilding == "price"){
                    populateOccupancy("price",1);
                    document.getElementById("buildingImage").src = priceImages[1];

                }
                else if (whichBuilding == "culc"){
                    populateOccupancy("culc",1);
                    document.getElementById("buildingImage").src = culcImages[1];

                }
             
            }
            function handleThird(){
                if (whichBuilding=="crossland"){
                    populateOccupancy("crossland",3);
                    document.getElementById("buildingImage").src = crosslandImages[3];

                }
                else if (whichBuilding == "price"){
                    populateOccupancy("price",2);
                    document.getElementById("buildingImage").src = priceImages[2];

                }
                else if (whichBuilding == "culc"){
                    populateOccupancy("culc",2);
                    document.getElementById("buildingImage").src = culcImages[2];

                }
             
            }
            function handleFourth(){
                if (whichBuilding=="crossland"){
                    populateOccupancy("crossland",4);
                    document.getElementById("buildingImage").src = crosslandImages[4];

                }
                else if (whichBuilding == "price"){
                    populateOccupancy("price",2);
                    document.getElementById("buildingImage").src = priceImages[2];

                }
                else if (whichBuilding == "culc"){
                    populateOccupancy("culc",3);
                    document.getElementById("buildingImage").src = culcImages[3];

                }
             
            }
            function handleFifth(){
                if (whichBuilding=="crossland"){
                    populateOccupancy("crossland",5);
                    document.getElementById("buildingImage").src = crosslandImages[5];

                }
                else if (whichBuilding == "culc"){
                    populateOccupancy("culc",4);
                    document.getElementById("buildingImage").src = culcImages[4];

                }

             
            }
            function handleSixth(){
                if (whichBuilding=="crossland"){
                    populateOccupancy("crossland",6);
                    document.getElementById("buildingImage").src = crosslandImages[6];

                }

             
            }
            function handleSeventh(){
                if (whichBuilding=="crossland"){
                    populateOccupancy("crossland",7);
                    document.getElementById("buildingImage").src = crosslandImages[7];

                }

             
            }






        </script>  
    </head>
    <body class="body" id="body" onload=defaultPage()>
 
         <style>
             html{
            margin: 0;
            height: 100%;
            width:100%;
            }
             .hidden{
                 /*position:absolute;*/
                 visibility: hidden;
             }
             .body{
                background-color: white;
                font-family: 'Roboto', sans-serif;
                font-size: 17pt;
            }
            
            .BuzzSenseContainer{
                height: 14%;
                background-color: #B3A369;
                /* margin-bottom: 30px; */
                padding-top: 15px;
                width: 100.78vw;
               
            }
            .BuzzSense{ 
                width: 30%;
                height: 6%;
                padding-bottom: 10px;
            }
            .outerbox{
                
                background-color: white;
                width:40vw;
                height: 100%;
                /* border-radius: 30px;
                margin-bottom: 50px;
                margin-left: 10px;
                margin-right: 10px; */
               
                
            }
            .selectors{
                text-align: center;
                padding-top: 10px;
            } 
            .imagebox{
               background-color: white;
               /* width:60vw; */
               /* margin-left: 20px;
               border-radius: 30px;
               margin-right: 10px; */
            }
            .occupancyResults{
                text-align: center;
            }
            .button{
                margin-top: 15px;
                margin-left: 40px;
            }
            #culc, #price, #crossland{
                position: absolute;
            }
            .padding-0{
            padding-right:0;
            padding-left:0;
             }
            .headButt{ 
            border: 2px solid black;
            background-color: white;
            color: black;
            padding: 10x 5px;
            cursor: pointer;
            width:20vw;
            height:100%;
            display:block; 
            float:left;
            border-top: 0px;
            border-left: 0px;
            
            }
            .tableButt{
               padding:5px;
               border: none;
               width: 35vw;
               background-color: #B3A369
            }
            .container{
                margin:0;
                padding:0;
                display: grid;
                grid-template-columns: 40vw 20vw 40vw;
                width:100vw;
            }
            .bottomHead{
                height: 14%;
                background-color:  #8c8c8c;
                /* margin-bottom: 30px; */
                padding-top: 100px;
                margin-top:30px;
            }
            .center {
                display: block;
                margin-left: auto;
                margin-right: auto;
                margin-top: 15px;
                
            }
        </style> 
            <div id="sense"class="BuzzSenseContainer row">
                    <img  class = "BuzzSense"alt ="BuzzSense Occupancy System" src="buzzsenseblue.png" >
                    <div class="selectors building row ">
                    <div>
                       <button class="headButt" type="button" onclick=showCulc()>CULC</button><!---->
                       <button class="headButt" type="button" onclick=showPrice()>Price Gilbert</button><!---->
                       <button class="headButt" style="border-right: none;" type="button" onclick=showCrossland()>Crossland Tower</button>
                    </div>
                </div>                      
            </div>
            <div id="container"class="container ">
                    <div class="imagebox center">
                        <img  id = "buildingImage" src="" width="342.857" length="800">
                    </div><!---->
                    <div class="justify-content-center">
                        <div class="occupancyResults" id = "occupancyResults">
                        
                        </div>
                    </div><!---->
                    <div class="outerbox justify-content-center">
                        <div class="selectors floor center">
                        <div class="button row">
                            <button class="tableButt" id="seventh"type="button" onclick=handleSeventh()>Floor 7</button>

                        </div>
                        <div class="button row">
                            <button class="tableButt" id="sixth" type="button" onclick=handleSixth()>Floor 6</button>

                        </div> 
                        <div class="button row">
                            <button class="tableButt" id="fifth"type="button" onclick=handleFifth()>Floor 5</button>

                        </div>
                        <div class="button row">
                            <button class="tableButt" id="fourth"type="button" onclick=handleFourth()>Floor 4</button>

                        </div>
                        <div class="button row">
                            <button class="tableButt" id="third"type="button" onclick=handleThird()>Floor 3</button>

                        </div>
                        <div class="button row">
                            <button class="tableButt" id="second"type="button" onclick=handleSecond()>Floor 2</button>

                        </div>
                        <div class="button row">
                            <button class="tableButt" id="first"type="button" onclick=handleFirst()>Floor 1</button>

                        </div>
                        <div class="button row">
                        <button class="tableButt" id="ground" type="button" onclick=handleGround()>Ground Floor</button>
    
                         </div>
                    </div>
                
                    </div>

            </div>
           
    </body>
</html>
